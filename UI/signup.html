<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/signup_style.css">
    <link rel="stylesheet" href="./css/style.css">
    <link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-2/css/all.min.css" integrity="sha256-46r060N2LrChLLb5zowXQ72/iKKNiw/lAmygmHExk/o=" crossorigin="anonymous" />
    <script src="./js-api/app.js"></script>
    
    <title>Sign Up</title>
</head>
<body>
    <div class="navbar">
        <div class="nav__logo"><a href="index.html">Furahax</a></div>
        <nav class="nav">
            
            <div class="openMenu"><i class="fa fa-bars"></i></div>
            <ul class="nav__links">
                <li class="link"><a href="#container-home">Home</a></li>
                <li class="link"><a href="#container-about">About Me</a></li> 
                <li class="link"><a href="#">Services</a></li>
                <li class="link"><a href="#container-portfolio">Portfolio</a></li>
                <li class="link"><a href="#container-blogs">Blogs</a></li>
                <li class="link"><a href="#container-contact">Contact Me</a></li>
                <li class="link"><a href="login.html" class="nav__btn">Login</a></li>
                <div class="closeMenu"><i class="fa fa-times"></i></div>
            </ul>
        </nav>
    </div>
<div class="wrapper">
    <div class="inner">
        <div class="image-holder">
            <img src="./assets/Group 157.jpg" alt="image">
        </div>
        <form id="signupForm">
            <h1>Furahax</h1>
            <h3>Welcome to Furahax</h3>
            <div class="form-wrapper names-field">
                <label class="label">Names</label><br>
                <div class="form-control">
                <input type="text" placeholder="Names" class="names" id="username">
            </div>
                <span class="error email-error"><i class="bx bx-error-circle error-icon"></i>
                    <p class="error-text">Please enter your names</p>
                </span>
            </div>
            <div class="form-wrapper email-field">
                <label class="label">Email</label><br>
                <div class="form-control">
                <input type="text" placeholder="Email Address" class="email" id="email">
            </div>
                <span class="error email-error"><i class="bx bx-error-circle error-icon"></i>
                    <p class="error-text">Please enter a valid Email</p>
                </span>
            </div>
           
            <div class="form-wrapper create-password">
                <label class="label">Password</label><br>
                <div class="form-control">
                <input type="password" placeholder="Password" class="password" id="password">
            </div>
                <span class="error password-error"><i class="bx bx-error-circle error-icon"></i>
                    <p class="error-text">Please enter a strong password</p>
                </span>
            </div>
            <!-- <div class="form-wrapper confirm-password">
                <label class="label">Confirm Password</label><br>
                <div class="form-control">
                <input type="password" placeholder="Confirm Password" class="cPassword">
            </div>
                <span class="error cpassword-error"><i class="bx bx-error-circle error-icon"></i>
                    <p class="error-text">Password don't match</p>
                </span>
            </div> -->
            <div>
            <button type="submit" id="create"> Sign up</button>
            <h4 id="info"></h4>
        </div>
            <h4 class="text">Already have an account? <a href="login.html">Login</a></h4>
        </form>
    </div>
</div>
<script>
    // Function to check if user is authenticated
    function isAuthenticated() {
        const token = localStorage.getItem('token');
        return token ? true : false;
    }

    // Function to get user role from token
    function getUserRole() {
        const token = localStorage.getItem('token');
        if (token) {
            const decodedToken = jwtDecode(token);
            return decodedToken.role;
        }
        return null;
    }

    // Function to redirect authenticated users from login and sign-up pages
    function redirectAuthenticatedUsers() {
        if (isAuthenticated()) {
            const role = getUserRole();
            if (role === 'admin') {
                window.location.href = 'dashboard.html'; // Redirect admin users to admin dashboard
            } else if (role === 'user') {
                window.location.href = 'blogs.html'; // Redirect regular users to user dashboard
            }
        }
    }

    // Call redirectAuthenticatedUsers function
    redirectAuthenticatedUsers();
</script>
<!-- <script src="./js/signup_val.js"></script>
<script src="./js/app.js"></script> -->
<script src="./js-api/signup.js"></script>


</body>
</html>
